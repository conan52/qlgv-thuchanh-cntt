@using TkbThucHanh.Models
@using TkbThucHanh.Models.Provider
@using TkbThucHanh.ViewSettings
@{
    var grid = Html.DevExpress().GridView(settings =>
    {
        settings.Name = "GridView";
        settings.CallbackRouteValues = new { Controller = "LichPhanCongThucHanh", Action = "GridViewPartial" };

        settings.SettingsEditing.AddNewRowRouteValues = new { Controller = "LichPhanCongThucHanh", Action = "GridViewPartialAddNew" };
        settings.SettingsEditing.UpdateRowRouteValues = new { Controller = "LichPhanCongThucHanh", Action = "GridViewPartialUpdate" };
        settings.SettingsEditing.DeleteRowRouteValues = new { Controller = "LichPhanCongThucHanh", Action = "GridViewPartialDelete" };
        settings.SettingDefaultColumn();

        settings.KeyFieldName = "MaLichTH";



        settings.Columns.Add(column =>
        {
            column.FieldName = "TuanHoc";
            column.Caption = "Tuần";
            
            
            var comboBoxProperties = column.PropertiesEdit as ComboBoxProperties;
            if (comboBoxProperties != null)
            {
                comboBoxProperties.DropDownStyle = DropDownStyle.DropDownList;
                comboBoxProperties.DataSource = DataProvider<TuanHoc>.GetAll();
                comboBoxProperties.ValueField = "SttTuan";
                comboBoxProperties.TextField = "SttTuan";
                comboBoxProperties.ValueType = typeof(int);
            }
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "Thu";
            column.Caption = "Thứ";
            column.Visible = true;
            column.EditFormSettings.Visible = DefaultBoolean.False;
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "TenMonHoc";
            column.Caption = "Môn học";


            var comboBoxProperties = column.PropertiesEdit as ComboBoxProperties;
            if (comboBoxProperties != null)
            {
                comboBoxProperties.TextFormatString = "{1}";
                comboBoxProperties.DropDownStyle = DropDownStyle.DropDownList;
                comboBoxProperties.DataSource = DataProvider<MonHoc>.GetAll();
                comboBoxProperties.Columns.Add("MaMonHoc", "Mã môn học", 65);
                comboBoxProperties.Columns.Add("TenMonHoc", "Tên môn học");
                comboBoxProperties.Columns.Add("HienThiTrinhDo", "Trình độ", 52);
                comboBoxProperties.Columns.Add("HienThiChuyenNganh", "Chuyên ngành", 78);
                comboBoxProperties.ValueField = "TenMonHoc";
                comboBoxProperties.TextField = "TenMonHoc";
            }
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "LopHoc";
            column.Caption = "Lớp";


            var comboBoxProperties = column.PropertiesEdit as ComboBoxProperties;
            if (comboBoxProperties != null)
            {
                comboBoxProperties.DropDownStyle = DropDownStyle.DropDownList;
                comboBoxProperties.DataSource = DataProvider<Lop>.GetAll();
                comboBoxProperties.ValueField = "TenLop";
                comboBoxProperties.TextField = "TenLop";
            }
        });
        
        
        settings.Columns.Add(column =>
        {
            column.FieldName = "Phong";
            column.Caption = "Phòng";


            var comboBoxProperties = column.PropertiesEdit as ComboBoxProperties;
            if (comboBoxProperties != null)
            {
                comboBoxProperties.TextFormatString = "{1}";
                comboBoxProperties.DropDownStyle = DropDownStyle.DropDownList;
                comboBoxProperties.DataSource = DataProvider<PhongThucHanh>.GetAll();

            
                comboBoxProperties.ValueField = "TenPhong";
                comboBoxProperties.TextField = "TenPhong";
            }
        });

        
        
        settings.Columns.Add(column =>
        {
            column.FieldName = "MaGv1";
            column.Caption = "GVHD1";


            var comboBoxProperties = column.PropertiesEdit as ComboBoxProperties;
            if (comboBoxProperties != null)
            {
                comboBoxProperties.DropDownStyle = DropDownStyle.DropDownList;
                comboBoxProperties.DataSource = DataProvider<GiangVien>.GetAll();
                comboBoxProperties.Columns.Add("HoVaTen", "Họ và tên");
                comboBoxProperties.Columns.Add("TenNganGon", "Viết tắt");

                comboBoxProperties.ValueField = "MaGv";
                comboBoxProperties.TextField = "TenNganGon";
            }
            
            
        });
        
        
        
        
        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "TkbThucHanhId";
        //    column.Visible = false;
        //    column.EditFormSettings.Visible = DefaultBoolean.False;

        //});

        
        
        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "Phong";

        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "Tiet";
        //    column.Visible = true;
        //    column.EditFormSettings.Visible = DefaultBoolean.False;
        //});


        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "SoTiet";
        //    column.Visible = true;
        //    column.EditFormSettings.Visible = DefaultBoolean.False;
        //});


        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "TietBatDau";
        //    column.Visible = false;
        //    column.EditFormSettings.Visible = DefaultBoolean.True;
        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "TietKetThuc";
        //    column.Visible = false;
        //    column.EditFormSettings.Visible = DefaultBoolean.True;
        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "NgayHoc";
        //    column.Visible = false;
        //    column.EditFormSettings.Visible = DefaultBoolean.True;
        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "TenLop";

        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "TenPhong";

        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "Gvhd1";

        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "Gvhd2";

        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "Gvhd3";

        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "GvVang";

        //});

        //settings.Columns.Add(column =>
        //{
        //    column.FieldName = "GhiChu";

        //});
        
        
  
        //settings.Columns.Add("TenMonHoc");
        //settings.Columns.Add("Phong");
        //settings.Columns.Add("LopHoc");
        //settings.Columns.Add("TietBatDau");
        //settings.Columns.Add("TietKetThuc");
        //settings.Columns.Add("NgayHoc");
        //settings.Columns.Add("MaGv1");
        //settings.Columns.Add("MaGv2");
        //settings.Columns.Add("MaGv3");
        //settings.Columns.Add("GvVang");
        //settings.Columns.Add("GhiChu");
        //settings.Columns.Add("TuanHoc");
        //settings.Columns.Add("Thu");
        //settings.Columns.Add("Tiet");
        //settings.Columns.Add("SoTiet");
        
          settings.SetCommandColumn();
    });
    if (ViewData["EditError"] != null)
    {
        grid.SetEditErrorText((string)ViewData["EditError"]);
    }
}
@grid.Bind(Model).GetHtml()