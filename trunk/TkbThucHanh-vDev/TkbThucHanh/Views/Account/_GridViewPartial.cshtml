@using TkbThucHanh.Models.Enums
@using TkbThucHanh.ViewSettings
@{
    GridViewExtension grid = Html.DevExpress().GridView(settings =>
    {
        settings.Name = "GridView";
        settings.CallbackRouteValues = new {Controller = "Account", Action = "GridViewPartial"};

        settings.SettingsEditing.AddNewRowRouteValues = new {Controller = "Account", Action = "GridViewPartialAddNew"};
        settings.SettingsEditing.UpdateRowRouteValues = new {Controller = "Account", Action = "GridViewPartialUpdate"};
        settings.SettingsEditing.DeleteRowRouteValues = new {Controller = "Account", Action = "GridViewPartialDelete"};

        settings.KeyFieldName = "UserId";

        settings.Columns.Add(column =>
        {
            column.FieldName = "UserName";
            column.Caption = "Tên đăng nhập";
        });
        settings.Columns.Add(column =>
        {
            column.FieldName = "Email";
            column.Caption = "Địa chỉ Email";
        });
        settings.Columns.Add(column =>
        {
            column.FieldName = "DisplayName";
            column.Caption = "Tên hiển thị";
        });

        settings.Columns.Add(column =>
        {
            column.Caption = "Quyền hạn";
            column.FieldName = "Role";

            column.ColumnType = MVCxGridViewColumnType.ComboBox;
            var comboBoxProperties = column.PropertiesEdit as ComboBoxProperties;
            if (comboBoxProperties != null)
            {
                comboBoxProperties.DataSource = EnumUltils.GetDescriptions_QuyenHan();

                comboBoxProperties.TextField = "Description";
                comboBoxProperties.ValueField = "Name";
            }
        });

        settings.SettingDefaultColumn();
    });
    if (ViewData["EditError"] != null)
    {
        grid.SetEditErrorText((string) ViewData["EditError"]);
    }
}
@grid.Bind(Model).GetHtml()