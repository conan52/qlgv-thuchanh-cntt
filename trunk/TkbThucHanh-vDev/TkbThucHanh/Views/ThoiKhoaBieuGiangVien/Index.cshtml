@using System.Web.UI.WebControls
@{
    ViewBag.Title = "Thời khóa biểu giảng viên";
}

<script>
    function CheckWeekUpdate() {
        LoadingPanel.Show();

        //$('#ButtonGetUpdate').text('Xin vui lòng đợi').disable();
        $.get("@Url.Action("GetNewTimeTable", "ThoiKhoaBieuGiangVien")", function (data) {
            if (data.Status == 1) {
                window.GridView.Refresh();
                alert('Đã thêm ' + data.Result + ' buổi học!');
                //$('#ButtonGetUpdate').text('Lấy TKB mới từ web trường').enable();
            } else {
                alert('Không có dữ liệu mới!');
            }
        });
        LoadingPanel.Hide();
    }
</script>

@Html.DevExpress().Button(settings =>
    {
        settings.ControlStyle.CssClass = "tablefloatleft";
        settings.Name = "Add";
        settings.Text = "Thêm mới";
        settings.UseSubmitBehavior = false;
        settings.EnableClientSideAPI = true;
        settings.ClientSideEvents.Click = "function(s, e) {GridView.AddNewRow();}";
    }).GetHtml()

@Html.DevExpress().Button(settings =>
    {
        settings.Name = "ButtonGetUpdate";
        settings.Text = "Lấy TKB mới từ web trường";
        settings.UseSubmitBehavior = false;
        settings.EnableClientSideAPI = true;
        settings.ClientSideEvents.Click = "function(s, e){CheckWeekUpdate();}";
    }).GetHtml()


@Html.DevExpress().LoadingPanel(settings =>
{

    settings.Name = "LoadingPanel";
    settings.Modal = true;
    settings.Text = "Đang tải dữ liệu";
    settings.ControlStyle.VerticalAlign = VerticalAlign.Middle;
    settings.ControlStyle.HorizontalAlign = HorizontalAlign.Center;
    settings.ContainerElementID = "GridView";
}).GetHtml()

@Html.Action("GridViewPartial")